# 跨域（CORS）

* 概念：一个url是由：协议，域名，端口三个部分组成（一般端口默认80），当一个请求url的协议，域名，端口三者之间的任意一个与当前页面url不同即为跨域


## 什么是同源
----

* 同源策略（Same origin policy）是一种约定，它是浏览器最核心也是最基本的安全功能，如果缺少同源策略，则浏览器的正常功能可能都会受到影响
* 它会阻止一个域的js脚本和另一个域的内容进行交换，如果缺少了同源策略，浏览器很容易收到XSS,CSFR 等攻击。
* 所谓同源（即再同一个域）就是两个页面具有相同的协议（protocol），主机（host）和端口号（port）


## 什么是跨域
----

* 跨域是指跨域名的访问，如域名不同；域名相同，端口不同；二级域名不同；如果域名和端口都相同，但是请求路径不同，不属于跨域
* 跨域问题是浏览器对于ajax请求的一个安全限制：一个页面发起的ajax的请求，只能是与当前页同域名的路径，这能有效阻止跨站攻击
* 跨域问题是针对ajax的限制

## JSONP跨域
----

* JSONP 即 JSON with Padding
* 实现原理： 通常为了减轻web服务器的负载，我们把js,css，图片等静态资源分离到另一台独立域名的服务器上，再html页面中再通过相应的标签从不同域名下加载静态资源，而被浏览器允许
* html 中由的表情支持跨域，比如```<script= "http://www.baidu.com"></script>``` 但是只支持get请求。

## CORS跨域
----

* CORS：全程“跨域资源共享”(Cross-origin resource sharing)
* 它允许浏览器向跨域服务器，发出XMLHttpRequest请求，从而克服AJAX只能同源使用的限制
* CORS需要浏览器和服务器同时支持
* 对于简单请求，浏览器会之间发送CORS请求，就是在header中加入origin请求头字段，同时，在响应头中，返回服务器设置的相关CORS头部字段，Access-Control-Allow-Origin字段为允许跨域请求的域。请求浏览器在请求头的origin中说明请求的源，服务器收到后发现允许该源跨域请求，则会成功返回
